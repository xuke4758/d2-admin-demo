(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212c10"],{aa82:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("d2-container",[s("div",{staticClass:"d2-mt d2-mb"},[s("el-button",{attrs:{type:"primary"},on:{click:e.add_user}},[e._v("添加角色")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist}},[s("el-table-column",{attrs:{prop:"username",label:"用户名称",width:"120"}}),s("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),s("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"}}),s("el-table-column",{attrs:{prop:"updated_at",label:"更新时间",width:"180"}}),s("el-table-column",{attrs:{prop:"role_name",label:"角色",width:"120"}}),s("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"d2-text-center"},[s("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),e.edit_user(t.$index)}}},[e._v(" 修改信息 ")])],1),s("div",{staticClass:"d2-text-center d2-mt"},[s("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),e.edit_pwd(t.$index)}}},[e._v(" 修改密码 ")])],1),s("div",{staticClass:"d2-text-center d2-mt"},[s("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),e.del_user(t.$index)}}},[e._v(" 删除 ")])],1)]}}])})],1),s("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"选择角色"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.rolelist,(function(e){return s("el-option",{key:e.id,attrs:{label:e.role_name,value:e.id}})})),1)],1),s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e.form.edit?[s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}})],1)]:e._e()],2),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confim_user}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"确定删除吗",visible:e.dialogVisible2,width:"30%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.delete_user}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible3,width:"30%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[s("span",[e._v(e._s(e.form.username))]),s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible3=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.editpwd}},[e._v("确 定")])],1)],1)],1)},l=[],o=s("9bd2"),r={userlist:function(e){return Object(o["a"])({url:"/userinfo",method:"get",data:e})},rolelist:function(e){return Object(o["a"])({url:"/userinfo/create",method:"get",data:e})},createuserinfo:function(e){return Object(o["a"])({url:"/userinfo",method:"post",data:e})},getuser:function(e){return Object(o["a"])({url:"/userinfo/".concat(e.id,"/edit"),method:"get",data:e})},edituser:function(e){return Object(o["a"])({url:"/userinfo/".concat(e.id),method:"put",data:e})},editpwd:function(e){return Object(o["a"])({url:"/userinfo/uppassword",method:"post",data:e})},deleteuser:function(e){return Object(o["a"])({url:"/userinfo/".concat(e.id),method:"delete",data:e})}},a={name:"systemuser",data:function(){return{rolelist:[],userlist:[],dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,form:{edit:!0,role_id:"",username:"",email:"",password:"",repassword:""},form2:{edit:!0,role_id:"",username:"",email:"",password:"",repassword:""}}},mounted:function(){this.getrolelist(),this.getuserlist()},methods:{getrolelist:function(){var e=this;r.rolelist().then((function(t){e.rolelist=t}))},getuserlist:function(){var e=this;r.userlist().then((function(t){e.userlist=t}))},edit_user:function(e){this.form=this.userlist[e],this.form.edit=!1,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.form=JSON.parse(JSON.stringify(this.form2))},add_user:function(){this.handleClose(),this.dialogVisible=!0},confim_user:function(){var e=this,t=this.form;console.log(t),t.id?r.edituser(t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.handleClose(),e.getuserlist()})):r.createuserinfo(t).then((function(t){e.$message({message:"创建成功",type:"success"}),e.handleClose(),e.getuserlist()}))},del_user:function(e){this.form=this.userlist[e],this.dialogVisible2=!0},handleClose2:function(){this.dialogVisible2=!1,this.form=JSON.parse(JSON.stringify(this.form2))},delete_user:function(){var e=this;r.deleteuser(this.form).then((function(t){e.$message({message:"删除成功",type:"success"}),e.handleClose2(),e.getuserlist()}))},handleClose3:function(){this.dialogVisible3=!1,this.form=JSON.parse(JSON.stringify(this.form2))},edit_pwd:function(e){this.form=this.userlist[e],this.dialogVisible3=!0},editpwd:function(){var e=this;r.editpwd(this.form).then((function(t){e.$message({message:"修改成功",type:"success"}),e.handleClose3()}))}}},n=a,d=s("2877"),u=function(e){e.options.__source="src/views/systemmanage/user/index.vue"},c=u,f=Object(d["a"])(n,i,l,!1,null,null,null);"function"===typeof c&&c(f);t["default"]=f.exports}}]);